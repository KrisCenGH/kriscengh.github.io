import{p as f}from"./pinyin-JC0mu4G_.js";import{_ as h,r as b,z as C,j as T,i as I,c as l,a as o,e as d,F as _,s as g,t as p,h as y,o as c,p as k,f as L}from"./index-C3I0j99N.js";import{T as m}from"./TabItem-C8jC4Ho5.js";const F={class:"contacts"},S={class:"letter"},B=["src"],E={class:"name"},N={class:"friends-sum"},R="https://142.171.30.197:10086",x={__name:"Contacts",setup(A){const r=b({}),v=C(()=>Object.values(r.value).reduce((s,t)=>s+t.length,0));T(async()=>{const{friends:s}=await I.post("/friends");s.slice().sort((a,n)=>{const e=u(a.username),i=u(n.username);return e.localeCompare(i)}).forEach(a=>{const n=u(a.username),e=/^[A-Z]$/.test(n)?n:"#";r.value[e]||(r.value[e]=[]),r.value[e].push(a)})});function u(s){if(!s)return"#";const t=s[0];return/[\u4e00-\u9fa5]/.test(t)?f(t,{style:f.STYLE_FIRST_LETTER})[0][0].toUpperCase():/[a-zA-Z]/.test(t)?t.toUpperCase():"#"}return(s,t)=>{const a=y("RouterLink");return c(),l("div",F,[t[0]||(t[0]=o("div",{class:"placeholder-div"},null,-1)),d(m,{itemIconSrc:"../../../public/contact_top-friend-notify.png",bigIconClass:"big-icon",itemName:"新的朋友",hasTriangle:!1,linkTo:{name:"addFriend"}}),d(m,{itemIconSrc:"../../../public/contact_top-addgroup.png",bigIconClass:"big-icon",itemName:"群聊",hasTriangle:!1,linkTo:{name:"allGroups"}}),d(m,{itemIconSrc:"../../../public/contact_top-tag.png",bigIconClass:"big-icon",itemName:"标签",hasTriangle:!1}),(c(!0),l(_,null,g(r.value,(n,e)=>(c(),l("div",{class:"friends-list",key:e},[o("div",S,p(e),1),(c(!0),l(_,null,g(n,i=>(c(),k(a,{class:"friend",to:{name:"friendProfile",params:{targetId:i.id}}},{default:L(()=>[o("img",{src:R+i.avatar_url,class:"avatar"},null,8,B),o("div",E,p(i.username),1)]),_:2},1032,["to"]))),256))]))),128)),o("div",N,p(v.value)+"个朋友",1),t[1]||(t[1]=o("div",{class:"bottem-placeholder-div"},null,-1))])}}},z=h(x,[["__scopeId","data-v-86726fcd"]]);export{z as default};
