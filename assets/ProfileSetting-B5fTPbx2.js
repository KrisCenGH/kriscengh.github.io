import{_ as p,u as f,c as v,a,x as o,t as m,d as _,i as n,o as w}from"./index-BN88ZBUW.js";const g={class:"profile-setting"},h={for:"avatar-input",class:"item"},k=["src"],y={class:"item-value"},I="http://localhost:3000",S={__name:"ProfileSetting",setup(b){const i=_(),e=f();async function l(s){const t=s.target.files[0];if(t)try{const r=new FormData;r.append("avatar",t);const{avatar_url:d}=await n.post("/user/upload-avatar",r,{headers:{"Content-Type":"multipart/form-data"}});e.userInfo.user.avatar_url=d,window.alert("头像修改成功！")}catch{window.alert("头像上传失败！")}}async function u(){const s=window.prompt("好名字可以让你的朋友更容易记住你");if(s!==null)try{const{message:t}=await n.post("/user/update-profile",{username:s});e.userInfo.user.username=s,window.alert("名字修改成功！")}catch{window.alert("名字修改失败！")}}function c(){i.back()}return(s,t)=>(w(),v("div",g,[a("div",{class:"top-bar"},[a("div",{class:"back-triangle",onClick:c}),t[0]||(t[0]=a("div",{class:"title"},"个人资料",-1))]),t[3]||(t[3]=a("div",{class:"top-placeholder-div"},null,-1)),a("label",h,[t[1]||(t[1]=a("div",{class:"description"},"头像",-1)),a("input",{type:"file",id:"avatar-input",accept:"image/*",class:"hidden-avatar-input",onChange:l},null,32),a("img",{src:I+o(e).userInfo.user.avatar_url,class:"avatar"},null,8,k)]),a("div",{class:"item",onClick:u},[t[2]||(t[2]=a("div",{class:"description"},"名字",-1)),a("div",y,m(o(e).userInfo.user.username),1)])]))}},B=p(S,[["__scopeId","data-v-ed708f5a"]]);export{B as default};
