import{_ as h}from"./bu_-IAMiqBfy.js";import{_ as y,u as b,r as c,j as w,i as l,q as R,c as o,a as s,m as u,p as B,e as C,f as _,x as t,h as x,t as v,d as F,o as r}from"./index-C3I0j99N.js";const L="/assets/chat_bubble-B2y9p4P_.png",N={class:"friend-profile"},S={class:"top-bar"},P={key:0,src:h,class:"info-icon"},V={class:"profile"},q=["src"],A={class:"name"},U={class:"userid"},j={key:0,class:"other-info"},D={key:1,class:"other-info"},E="https://142.171.30.197:10086",M={__name:"FriendProfile",setup(z){const a=R(),g=F(),n=b(),p=c(""),m=c(""),d=c();w(async()=>{const{users:i}=await l.post("/user/search",{query:a.params.targetId});p.value=i[0].username,m.value=i[0].avatar_url;const{isFriend:e}=await l.post("/isfriends",{friendId:a.params.targetId});d.value=e});async function I(){try{await l.post("/add-friend",{friendId:a.params.targetId}),window.alert("添加好友成功！"),d.value=!0}catch{window.alert("添加好友失败！")}}function k(){g.back()}return(i,e)=>{const f=x("RouterLink");return r(),o("div",N,[s("div",S,[s("div",{class:"back-triangle",onClick:k}),C(f,{to:{name:"friendSetting",params:{targetId:t(a).params.targetId}}},{default:_(()=>[t(a).params.targetId!=t(n).userInfo.user.id&&d.value?(r(),o("img",P)):u("",!0)]),_:1},8,["to"])]),e[4]||(e[4]=s("div",{class:"top-placeholder-div"},null,-1)),s("div",V,[s("img",{src:E+m.value,class:"avatar"},null,8,q),s("div",A,v(p.value),1),s("div",U,"微信号："+v(t(a).params.targetId),1)]),t(a).params.targetId!=t(n).userInfo.user.id?(r(),o("div",j,e[0]||(e[0]=[s("div",{class:"describe"},"朋友资料",-1),s("div",{class:"triangle"},null,-1)]))):u("",!0),t(a).params.targetId!=t(n).userInfo.user.id?(r(),o("div",D,e[1]||(e[1]=[s("div",{class:"describe"},"朋友权限",-1),s("div",{class:"triangle"},null,-1)]))):u("",!0),d.value||t(a).params.targetId==t(n).userInfo.user.id?(r(),B(f,{key:2,class:"send-message",to:{name:"friendChat",params:{targetId:t(a).params.targetId}}},{default:_(()=>e[2]||(e[2]=[s("img",{src:L,class:"send-message-icon"},null,-1),s("div",{class:"send-message-describe"},"发消息",-1)])),_:1},8,["to"])):(r(),o("div",{key:3,class:"add-friend",onClick:I},e[3]||(e[3]=[s("div",{class:"add-friend-describe"},"添加到通讯录",-1)])))])}}},J=y(M,[["__scopeId","data-v-2d16d419"]]);export{J as default};
